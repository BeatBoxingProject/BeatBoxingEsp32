; ============================================================
; Global Settings (Applies to the "Upload All" button)
; ============================================================
[platformio]
; This tells PIO to upload to BOTH environments when you click "Upload"
default_envs = cam01, cam02

; ============================================================
; Base Environment (Shared Settings)
; ============================================================
[env_base]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200
board_build.partitions = huge_app.csv

; Common Build Flags
build_flags =
    -DBOARD_HAS_PSRAM
    -mfix-esp32-psram-cache-issue
    -DCORE_DEBUG_LEVEL=3

lib_deps =
    espressif/esp32-camera

; ============================================================
; CAMERA 1 (USB0)
; ============================================================
[env:cam01]
extends = env_base
upload_port = /dev/ttyUSB0
monitor_port = /dev/ttyUSB0
build_flags =
    ${env_base.build_flags}      ; Load the shared flags
    -D HOSTNAME=\"esp32-cam-01\" ; IMPORTANT: Escape quotes for strings
    -D IP_LAST_OCTET=101         ; IP will be ...137.101

; ============================================================
; CAMERA 2 (USB1)
; ============================================================
[env:cam02]
extends = env_base
upload_port = /dev/ttyUSB1
monitor_port = /dev/ttyUSB1
build_flags =
    ${env_base.build_flags}      ; Load the shared flags
    -D HOSTNAME=\"esp32-cam-02\" ; IMPORTANT: Escape quotes for strings
    -D IP_LAST_OCTET=102         ; IP will be ...137.102